<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Sign Up | My Stylist</title>

<!-- Fonts & Icons -->
<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins:wght@300;400;500&display=swap" rel="stylesheet"/>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

<style>
/* ===== THEME UNCHANGED ===== */
*{margin:0;padding:0;box-sizing:border-box;font-family:"Poppins",sans-serif;}
body{
  height:100vh;
  background:linear-gradient(135deg,#ffe6f7,#f8e6ff,#ffffff);
  display:flex;justify-content:center;align-items:center;
  position:relative;overflow:hidden;
}

/* Floating background */
.floating-shapes{position:absolute;top:0;left:0;width:100%;height:100%;z-index:1;}
.shape{
  position:absolute;border-radius:50%;
  background:radial-gradient(circle at 30% 30%,#ffe3f1,#e1b4ff);
  opacity:.6;animation:float 10s infinite ease-in-out;
}
@keyframes float{
  0%{transform:translateY(0)}
  50%{transform:translateY(-50px)}
  100%{transform:translateY(0)}
}

/* Container */
.auth-container{
  position:relative;z-index:5;width:380px;
  background:rgba(255,255,255,.25);
  border-radius:25px;
  padding:50px 40px;
  text-align:center;
  backdrop-filter:blur(15px);
  box-shadow:0 0 25px rgba(216,187,255,.7);
}

/* âœ¨ Shimmer Heading (STABLE) */
.auth-container h1{
  font-family:"Great Vibes",cursive;
  font-size:3rem;
  background:linear-gradient(120deg,#e3a3b5,#b38bff,#f6d9f3);
  background-size:200% auto;
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  animation:shimmer 6s linear infinite;
  margin-bottom:25px;
}
@keyframes shimmer{
  0%{background-position:0% center}
  100%{background-position:200% center}
}

/* Inputs */
.input-group{margin:18px 0;position:relative;}
input{
  width:100%;
  padding:12px 42px 12px 16px;
  border-radius:30px;
  border:1.5px solid rgba(255,255,255,.6);
  background:rgba(255,255,255,.4);
  outline:none;
  transition:.3s;
}

/* â¬‡ Active highlight while typing */
input:focus{
  border-color:#b38bff;
  box-shadow:0 0 12px rgba(179,139,255,.6);
  background:rgba(255,255,255,.65);
}

/* Eye icon */
.toggle-password{
  position:absolute;
  right:15px;top:50%;
  transform:translateY(-50%);
  cursor:pointer;color:#777;
}

/* Button */
button{
  width:100%;
  padding:13px;
  background:linear-gradient(135deg,#f4a6ff,#e48bff);
  border:none;border-radius:30px;
  color:white;font-size:1rem;
  cursor:pointer;
  box-shadow:0 4px 15px rgba(255,162,227,.5);
  transition:.3s;
}
button:hover{
  transform:scale(1.05);
  box-shadow:0 6px 25px rgba(255,162,227,.7);
}

/* Links */
.links{
  margin-top:18px;
  font-size:.9rem;
}
.links a{
  color:#b57eff;
  text-decoration:none;
}
.links a:hover{text-decoration:underline}

/* Error */
.error-message{color:#b82e8a;font-size:.9rem;margin-top:10px;}
</style>
</head>

<body>

<!-- Floating shapes -->
<div class="floating-shapes"></div>

<div class="auth-container">
  <h1>Sign Up</h1>

  <form id="signupForm">
    <div class="input-group">
      <input type="email" id="email" placeholder="Email" required>
    </div>

    <div class="input-group">
      <input type="text" id="username" placeholder="Username" required>
    </div>

    <div class="input-group">
      <input type="password" id="password" placeholder="Password" required>
      <i class="fas fa-eye-slash toggle-password" id="togglePassword"></i>
    </div>

    <div class="input-group">
      <input type="password" id="confirmPassword" placeholder="Confirm Password" required>
      <i class="fas fa-eye-slash toggle-password" id="toggleConfirm"></i>
    </div>

    <div id="errorMsg" class="error-message"></div>

    <button type="submit">Sign Up</button>

    <!-- ðŸ”™ Go back option -->
    <div class="links">
      <a href="login.html">Already have an account? Login</a>
    </div>
  </form>
</div>

<!-- Floating animation JS -->
<script>
const container=document.querySelector(".floating-shapes");
for(let i=0;i<15;i++){
  const s=document.createElement("div");
  s.className="shape";
  const size=Math.random()*90+40;
  s.style.width=s.style.height=size+"px";
  s.style.left=Math.random()*100+"%";
  s.style.top=Math.random()*100+"%";
  s.style.animationDuration=8+Math.random()*6+"s";
  container.appendChild(s);
}

/* Password toggle */
function toggle(id,icon){
  const i=document.getElementById(id);
  const ic=document.getElementById(icon);
  ic.onclick=()=>{
    i.type=i.type==="password"?"text":"password";
    ic.classList.toggle("fa-eye");
    ic.classList.toggle("fa-eye-slash");
  };
}
toggle("password","togglePassword");
toggle("confirmPassword","toggleConfirm");
</script>

<!-- ðŸ”¥ Firebase Signup -->
<script type="module">
console.log("Signup script loaded");

import { auth, db } from "./firebase.js";
import { createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-auth.js";
import { doc, setDoc } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-firestore.js";

signupForm.addEventListener("submit", async(e)=>{
  e.preventDefault();
  console.log("Signup button clicked");


  const emailVal=email.value.trim();
  const userVal=username.value.trim();
  const pass=password.value;
  const confirm=confirmPassword.value;
  errorMsg.textContent="";

  if(pass!==confirm){
    errorMsg.textContent="âš  Passwords do not match";
    return;
  }

  try{
    const cred=await createUserWithEmailAndPassword(auth,emailVal,pass);

    await setDoc(doc(db,"users",cred.user.uid),{
      email:emailVal,
      username:userVal,
      createdAt:new Date()
    });

    localStorage.setItem("username",userVal);
    localStorage.setItem("email",emailVal);

    window.location.href="details.html? mode=first";

  }catch(err){
    errorMsg.textContent=err.message;
  }
});
</script>

</body>
</html>